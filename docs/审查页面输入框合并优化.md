# 审查页面输入框合并优化

## 🎯 优化目标

将AI批量重命名审查页面的建议标题显示和用户修改输入框合并，实现：
1. **直接编辑**：建议标题直接显示在输入框内，用户可以自由修改
2. **简化界面**：减少重复显示，界面更加简洁
3. **提升效率**：用户可以直接在建议基础上进行微调
4. **统一提交**：以输入框内容为准进行最终提交

## ✅ 设计方案

### 1. **界面布局优化**

#### 原设计问题
- 建议标题和编辑输入框分离显示
- 用户需要先查看建议，再复制到输入框编辑
- 界面元素冗余，视觉层次复杂

#### 新设计方案
- **合并显示**：建议标题直接作为输入框的初始值
- **即时编辑**：用户可以直接在输入框中修改建议标题
- **状态指示**：通过样式和标签区分原始建议和用户修改

### 2. **交互流程简化**

#### 用户操作流程
1. **查看原标题**：原标题在上方单独显示
2. **编辑建议**：建议标题在输入框中，可直接编辑
3. **状态反馈**：修改后输入框样式变化，显示"已修改"状态
4. **快速重置**：一键恢复到AI原始建议

#### 技术实现
```typescript
<Input
    value={result.editedTitle || result.newTitle || ''}
    onChange={(e) => handleManualEdit(result.id, e.target.value)}
    placeholder={t('enterCustomTitle')}
    className={`text-sm h-9 ${
        result.editedTitle 
            ? 'border-primary bg-primary/5' 
            : 'border-border'
    }`}
/>
```

## 🔧 具体实现

### 1. **布局结构调整**

#### 新的组件结构
```typescript
<div className="space-y-3">
    {/* 原标题显示 */}
    <div>
        <span className="text-xs font-medium text-muted-foreground uppercase tracking-wide">
            {t('originalTitle')}
        </span>
        <p className="text-sm text-muted-foreground mt-1" title={result.originalTitle}>
            {result.originalTitle}
        </p>
    </div>

    {/* 建议标题输入框 */}
    <div>
        <div className="flex items-center justify-between mb-1">
            <span className="text-xs font-medium text-primary uppercase tracking-wide">
                {result.editedTitle ? t('editedTitle') : t('suggestedTitle')}
            </span>
            {result.editedTitle && (
                <Button
                    variant="ghost"
                    size="sm"
                    onClick={() => handleResetToAI(result.id)}
                    className="h-6 px-2 text-xs flex-shrink-0"
                    title={t('resetToAI')}
                >
                    <RotateCcw className="h-3 w-3 mr-1" />
                    {t('reset')}
                </Button>
            )}
        </div>
        <Input
            value={result.editedTitle || result.newTitle || ''}
            onChange={(e) => handleManualEdit(result.id, e.target.value)}
            placeholder={t('enterCustomTitle')}
            className={`text-sm h-9 ${
                result.editedTitle 
                    ? 'border-primary bg-primary/5' 
                    : 'border-border'
            }`}
        />
        {result.editedTitle && (
            <p className="text-xs text-primary mt-1 flex items-center gap-1">
                <CheckCircle className="h-3 w-3" />
                {t('modified')}
            </p>
        )}
    </div>
</div>
```

### 2. **状态管理优化**

#### 动态标签显示
```typescript
<span className="text-xs font-medium text-primary uppercase tracking-wide">
    {result.editedTitle ? t('editedTitle') : t('suggestedTitle')}
</span>
```

#### 视觉状态反馈
```typescript
className={`text-sm h-9 ${
    result.editedTitle 
        ? 'border-primary bg-primary/5'  // 修改后：主色调边框 + 浅色背景
        : 'border-border'                // 原始状态：默认边框
}`}
```

### 3. **重置功能增强**

#### 重置按钮优化
```typescript
{result.editedTitle && (
    <Button
        variant="ghost"
        size="sm"
        onClick={() => handleResetToAI(result.id)}
        className="h-6 px-2 text-xs flex-shrink-0"
        title={t('resetToAI')}
    >
        <RotateCcw className="h-3 w-3 mr-1" />
        {t('reset')}
    </Button>
)}
```

#### 特点
- **条件显示**：只在用户修改后显示重置按钮
- **紧凑设计**：小尺寸按钮，不占用过多空间
- **图标+文字**：清晰的操作指示

## 🌐 国际化支持

### 新增翻译文本

#### 中文翻译
```json
{
  "editedTitle": "已修改标题",
  "modified": "已修改",
  "reset": "重置"
}
```

#### 英文翻译
```json
{
  "editedTitle": "Edited Title",
  "modified": "Modified",
  "reset": "Reset"
}
```

### 动态标签切换
- **未修改时**：显示"建议标题" / "Suggested Title"
- **修改后**：显示"已修改标题" / "Edited Title"

## 📊 用户体验提升

### 1. **操作效率**
- **减少步骤**：从"查看建议 → 复制 → 编辑"简化为"直接编辑"
- **即时反馈**：修改后立即显示视觉反馈
- **快速重置**：一键恢复原始建议

### 2. **界面简洁**
- **减少冗余**：不再重复显示建议标题
- **视觉统一**：所有可编辑内容都在输入框中
- **层次清晰**：原标题 → 编辑区域的清晰层次

### 3. **认知负担**
- **直观理解**：输入框内容即为最终结果
- **状态明确**：通过颜色和标签清晰指示修改状态
- **操作一致**：所有编辑操作都在同一个输入框中

## 🔄 数据流程

### 1. **初始化**
```typescript
// 输入框初始值为AI建议标题
value={result.editedTitle || result.newTitle || ''}
```

### 2. **用户编辑**
```typescript
// 用户修改时更新editedTitle
onChange={(e) => handleManualEdit(result.id, e.target.value)}
```

### 3. **最终提交**
```typescript
// 优先使用用户编辑的标题，否则使用AI建议
const finalTitle = result.editedTitle || result.newTitle;
```

### 4. **重置操作**
```typescript
// 清除用户编辑，恢复AI建议
onClick={() => handleResetToAI(result.id)}
```

## 🎨 视觉设计

### 1. **状态区分**

#### 原始建议状态
- **边框**：默认灰色边框 `border-border`
- **背景**：默认白色背景
- **标签**：显示"建议标题"

#### 用户修改状态
- **边框**：主色调边框 `border-primary`
- **背景**：浅色主题背景 `bg-primary/5`
- **标签**：显示"已修改标题"
- **指示器**：显示"已修改"状态

### 2. **交互反馈**

#### 重置按钮
- **显示条件**：仅在用户修改后显示
- **位置**：标签行右侧，便于操作
- **样式**：Ghost样式，不抢夺视觉焦点

#### 状态指示
- **修改标识**：绿色勾选图标 + "已修改"文字
- **位置**：输入框下方，提供即时反馈

## 📁 相关文件

### 修改文件
- **主要组件**：`entrypoints/newtab/batch-rename.tsx`
- **中文翻译**：`locales/zh_CN/common.json`
- **英文翻译**：`locales/en/common.json`

### 影响功能
- **审查页面**：结果列表的显示和编辑
- **提交逻辑**：以输入框内容为准进行最终提交
- **重置功能**：恢复AI原始建议

## 🎉 总结

通过将建议标题和编辑输入框合并，实现了：

1. **界面简化**：减少重复元素，视觉更加清晰
2. **操作直观**：用户可以直接在建议基础上进行编辑
3. **状态明确**：通过样式和标签清晰区分原始建议和用户修改
4. **效率提升**：减少操作步骤，提高编辑效率

这种设计让用户能够更自然地与AI建议进行交互，既保留了AI的智能建议，又给予用户充分的编辑自由度，显著提升了批量重命名功能的可用性和用户体验。

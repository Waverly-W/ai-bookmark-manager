# å¿«é€Ÿå‚è€ƒï¼šP0 ä¼˜åŒ–æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
npm install
```

### å¼€å‘æ¨¡å¼
```bash
npm run dev
```

### è¿è¡Œæµ‹è¯•
```bash
npm test              # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:ui      # UI ç•Œé¢è¿è¡Œæµ‹è¯•
npm run test:coverage # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

### ç”Ÿäº§æ„å»º
```bash
npm run build
```

---

## ğŸ“š æ ¸å¿ƒæ”¹è¿›é€ŸæŸ¥è¡¨

### P0-1ï¼šaiService ç¨³å®šæ€§

#### ä½¿ç”¨ fetchWithRetry
```typescript
import { fetchWithRetry } from '@/lib/aiService'

// é»˜è®¤å‚æ•°
const response = await fetchWithRetry(url, init)

// è‡ªå®šä¹‰å‚æ•°
const response = await fetchWithRetry(url, init, {
  timeoutMs: 60000,
  retries: 3,
  signal: abortController.signal
})
```

#### ä½¿ç”¨ ConcurrencyController
```typescript
import { ConcurrencyController } from '@/lib/aiService'

const controller = new ConcurrencyController(2) // æœ€å¤š 2 ä¸ªå¹¶å‘
const result = await controller.run(() => asyncTask())
```

#### ä½¿ç”¨ buildEndpoint
```typescript
import { buildEndpoint } from '@/lib/aiService'

const url = buildEndpoint('https://api.example.com/', 'chat/completions')
// => 'https://api.example.com/chat/completions'
```

---

### P0-3ï¼šæ ·å¼ç³»ç»ŸåŒ–

#### Button ç»„ä»¶
```tsx
import { Button } from '@/components/ui/button'

// å˜ä½“
<Button variant="default">ä¸»è¦æ“ä½œ</Button>
<Button variant="destructive">åˆ é™¤</Button>
<Button variant="outline">æ¬¡è¦æ“ä½œ</Button>
<Button variant="secondary">æ¬¡è¦</Button>
<Button variant="ghost">å¹½çµ</Button>
<Button variant="link">é“¾æ¥</Button>

// å°ºå¯¸
<Button size="sm">å°</Button>
<Button size="default">é»˜è®¤</Button>
<Button size="lg">å¤§</Button>
<Button size="icon">å›¾æ ‡</Button>
```

#### Input ç»„ä»¶
```tsx
import { Input } from '@/components/ui/input'

// æ ‡å‡†è¾“å…¥
<Input placeholder="è¾“å…¥å†…å®¹..." />

// é”™è¯¯çŠ¶æ€
<Input variant="destructive" aria-invalid="true" />

// ä¸åŒå°ºå¯¸
<Input size="sm" />
<Input size="default" />
<Input size="lg" />
```

#### Dialog ç»„ä»¶
```tsx
import { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'

<Dialog open={isOpen} onOpenChange={setIsOpen}>
  <DialogContent size="lg">
    <DialogHeader>
      <DialogTitle>æ ‡é¢˜</DialogTitle>
    </DialogHeader>
    {/* å†…å®¹ */}
  </DialogContent>
</Dialog>
```

---

### P0-4ï¼šå•å…ƒæµ‹è¯•

#### è¿è¡Œç‰¹å®šæµ‹è¯•
```bash
npm test -- aiService.test.ts
npm test -- bookmarkUtils.test.ts
npm test -- faviconUtils.test.ts
```

#### æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
```bash
npm run test:coverage
```

#### æµ‹è¯•æ–‡ä»¶ä½ç½®
- `lib/__tests__/aiService.test.ts` (8 ä¸ªæµ‹è¯•)
- `lib/__tests__/bookmarkUtils.test.ts` (17 ä¸ªæµ‹è¯•)
- `lib/__tests__/faviconUtils.test.ts` (19 ä¸ªæµ‹è¯•)

---

### P0-5ï¼šçŠ¶æ€ç»„ä»¶

#### Skeleton åŠ è½½éª¨æ¶å±
```tsx
import { Skeleton } from '@/components/ui/skeleton'

{isLoading ? (
  <div className="grid gap-4">
    <Skeleton className="h-32 rounded-lg" />
    <Skeleton className="h-32 rounded-lg" />
  </div>
) : (
  <BookmarkList />
)}
```

#### EmptyState ç©ºçŠ¶æ€
```tsx
import { EmptyState } from '@/components/ui/empty-state'
import { BookmarkIcon } from 'lucide-react'

{bookmarks.length === 0 && (
  <EmptyState
    icon={<BookmarkIcon />}
    title="No bookmarks"
    description="Add your first bookmark"
    action={<Button onClick={handleAdd}>Add</Button>}
  />
)}
```

#### ErrorState é”™è¯¯çŠ¶æ€
```tsx
import { ErrorState } from '@/components/ui/error-state'

{error && (
  <ErrorState
    title="Failed to load"
    error={error}
    action={<Button onClick={handleRetry}>Retry</Button>}
  />
)}
```

#### ErrorBoundary é”™è¯¯è¾¹ç•Œ
```tsx
import { ErrorBoundary } from '@/components/error-boundary'

<ErrorBoundary>
  <SettingsPage />
</ErrorBoundary>
```

---

## ğŸ”§ å¸¸è§ä»»åŠ¡

### æ·»åŠ æ–°çš„ Button å˜ä½“
```typescript
// components/ui/button.tsx
const buttonVariants = cva(
  "base-classes",
  {
    variants: {
      variant: {
        // æ·»åŠ æ–°å˜ä½“
        custom: "custom-classes"
      }
    }
  }
)
```

### æ·»åŠ æ–°çš„ Input å°ºå¯¸
```typescript
// components/ui/input.tsx
const inputVariants = cva(
  "base-classes",
  {
    variants: {
      size: {
        // æ·»åŠ æ–°å°ºå¯¸
        xl: "h-12 px-5 py-3 text-xl"
      }
    }
  }
)
```

### æ·»åŠ æ–°çš„æµ‹è¯•
```typescript
// lib/__tests__/myUtils.test.ts
import { describe, it, expect } from 'vitest'

describe('myUtils', () => {
  it('should do something', () => {
    expect(result).toBe(expected)
  })
})
```

---

## ğŸ“– æ–‡æ¡£å¯¼èˆª

### è¯¦ç»†æ–‡æ¡£
| æ–‡æ¡£ | å†…å®¹ |
|------|------|
| [P0-1 æ€»ç»“](./P0-1-aiServiceç¨³å®šæ€§æ”¹é€ æ€»ç»“.md) | aiService æ”¹è¿›è¯¦æƒ… |
| [P0-3 æ€»ç»“](./P0-3-æ ·å¼ç³»ç»ŸåŒ–æ€»ç»“.md) | æ ·å¼æ”¹è¿›è¯¦æƒ… |
| [è®¾è®¡ç³»ç»Ÿ](./è®¾è®¡ç³»ç»Ÿä¸ç»„ä»¶è§„èŒƒ.md) | å®Œæ•´è®¾è®¡è§„èŒƒ |
| [P0-4 æ€»ç»“](./P0-4-æ ¸å¿ƒé€»è¾‘å•å…ƒæµ‹è¯•æ€»ç»“.md) | æµ‹è¯•è¯¦æƒ… |
| [P0-5 æ€»ç»“](./P0-5-æ€§èƒ½ä¼˜åŒ–ä¸çŠ¶æ€ç»„ä»¶æ€»ç»“.md) | çŠ¶æ€ç»„ä»¶è¯¦æƒ… |

### åŠŸèƒ½æ–‡æ¡£
| æ–‡æ¡£ | å†…å®¹ |
|------|------|
| [NewTab è¯´æ˜](./NewTabåŠŸèƒ½è¯´æ˜.md) | æ–°æ ‡ç­¾é¡µåŠŸèƒ½ |
| [Favicon è¯´æ˜](./FaviconåŠŸèƒ½è¯´æ˜.md) | ç½‘ç«™å›¾æ ‡åŠŸèƒ½ |

---

## ğŸ› æ•…éšœæ’é™¤

### ç¼–è¯‘é”™è¯¯
```bash
npm run compile
```

### æµ‹è¯•å¤±è´¥
```bash
npm test -- --reporter=verbose
```

### æ„å»ºå¤±è´¥
```bash
npm run build -- --debug
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. ä½¿ç”¨ cva ç®¡ç†æ ·å¼
```tsx
// âœ… å¥½
const buttonVariants = cva("base", { variants: { ... } })

// âŒ é¿å…
const buttonClass = isActive ? "bg-blue" : "bg-gray"
```

### 2. æ·»åŠ é”™è¯¯è¾¹ç•Œ
```tsx
// âœ… å¥½
<ErrorBoundary>
  <CriticalComponent />
</ErrorBoundary>

// âŒ é¿å…
<CriticalComponent />
```

### 3. æ˜¾ç¤ºåŠ è½½çŠ¶æ€
```tsx
// âœ… å¥½
{isLoading ? <Skeleton /> : <Content />}

// âŒ é¿å…
{isLoading && <div>Loading...</div>}
<Content />
```

### 4. å¤„ç†ç©ºçŠ¶æ€
```tsx
// âœ… å¥½
{items.length === 0 ? <EmptyState /> : <List />}

// âŒ é¿å…
{items.map(item => <Item key={item.id} {...item} />)}
```

---

## ğŸ“ è·å–å¸®åŠ©

1. **æŸ¥çœ‹æ–‡æ¡£**: å‚è€ƒ `docs/` ç›®å½•ä¸­çš„è¯¦ç»†æ–‡æ¡£
2. **æŸ¥çœ‹æµ‹è¯•**: å‚è€ƒ `lib/__tests__/` ä¸­çš„æµ‹è¯•ç”¨ä¾‹
3. **æŸ¥çœ‹ç¤ºä¾‹**: å‚è€ƒç°æœ‰ç»„ä»¶çš„å®ç°

---

**æœ€åæ›´æ–°**: 2025-10-16
**ç‰ˆæœ¬**: P0 é˜¶æ®µå®Œæˆ


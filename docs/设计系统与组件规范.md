# 设计系统与组件规范

## 📐 设计令牌（Design Tokens）

### 颜色系统

#### 基础颜色
项目使用 CSS 变量定义颜色，存储在 `assets/main.css` 中，支持亮色/暗色模式自动切换。

```css
/* 亮色模式（默认） */
:root {
  --background: 0 0% 100%;           /* 背景色 */
  --foreground: 224 71.4% 4.1%;      /* 前景色（文本） */
  --card: 0 0% 100%;                 /* 卡片背景 */
  --card-foreground: 224 71.4% 4.1%; /* 卡片文本 */
  --primary: 262.1 83.3% 57.8%;      /* 主色（紫色） */
  --primary-foreground: 210 20% 98%; /* 主色文本 */
  --secondary: 220 14.3% 95.9%;      /* 次色 */
  --secondary-foreground: 220.9 39.3% 11%;
  --destructive: 0 84.2% 60.2%;      /* 危险色（红色） */
  --destructive-foreground: 210 20% 98%;
  --muted: 220 14.3% 95.9%;          /* 禁用/次要文本 */
  --muted-foreground: 220 8.9% 46.1%;
  --accent: 220 14.3% 95.9%;         /* 强调色 */
  --accent-foreground: 220.9 39.3% 11%;
  --border: 220 13% 91%;             /* 边框色 */
  --input: 220 13% 91%;              /* 输入框背景 */
  --ring: 262.1 83.3% 57.8%;         /* 焦点环色 */
  --radius: 0.5rem;                  /* 圆角半径 */
}

/* 暗色模式 */
@media (prefers-color-scheme: dark) {
  :root {
    --background: 224 71.4% 4.1%;
    --foreground: 210 20% 98%;
    /* ... 其他颜色 ... */
  }
}
```

#### 强调色支持
项目支持多种强调色主题，通过 `accentColorUtils.ts` 动态切换：
- 紫色（默认）: `262.1 83.3% 57.8%`
- 蓝色: `217.2 91.2% 59.8%`
- 绿色: `142.3 76.2% 36.3%`
- 红色: `0 84.2% 60.2%`
- 橙色: `24.6 95% 53.1%`

### 间距系统

基于 Tailwind CSS 的默认间距：
- `xs`: 0.25rem (4px)
- `sm`: 0.5rem (8px)
- `md`: 1rem (16px)
- `lg`: 1.5rem (24px)
- `xl`: 2rem (32px)
- `2xl`: 3rem (48px)

### 字体系统

```css
/* 字体大小 */
- xs: 0.75rem (12px)
- sm: 0.875rem (14px)
- base: 1rem (16px)
- lg: 1.125rem (18px)
- xl: 1.25rem (20px)

/* 字体权重 */
- normal: 400
- medium: 500
- semibold: 600
- bold: 700
```

### 圆角系统

```css
- sm: calc(var(--radius) - 4px)  /* 0.25rem */
- md: calc(var(--radius) - 2px)  /* 0.375rem */
- lg: var(--radius)              /* 0.5rem */
```

---

## 🎨 组件规范

### Button 组件

#### 变体（Variants）
- **default**: 主色按钮，用于主要操作
- **destructive**: 危险操作（删除、取消等）
- **outline**: 次要操作，带边框
- **secondary**: 次要操作，填充背景
- **ghost**: 幽灵按钮，仅 hover 时显示背景
- **link**: 链接样式按钮

#### 尺寸（Sizes）
- **sm**: 小按钮 (h-9, px-3, text-xs)
- **default**: 默认按钮 (h-10, px-4, text-sm)
- **lg**: 大按钮 (h-11, px-8, text-base)
- **icon**: 图标按钮 (h-10, w-10)

#### 使用示例
```tsx
import { Button } from "@/components/ui/button"

// 主要操作
<Button variant="default">保存</Button>

// 危险操作
<Button variant="destructive">删除</Button>

// 次要操作
<Button variant="outline">取消</Button>

// 不同尺寸
<Button size="sm">小按钮</Button>
<Button size="lg">大按钮</Button>
```

### Input 组件

#### 变体（Variants）
- **default**: 标准输入框
- **destructive**: 错误状态输入框（用于表单验证失败）

#### 尺寸（Sizes）
- **sm**: 小输入框 (h-8, px-2, text-sm)
- **default**: 默认输入框 (h-9, px-3, text-base)
- **lg**: 大输入框 (h-10, px-4, text-lg)

#### 使用示例
```tsx
import { Input } from "@/components/ui/input"

// 标准输入框
<Input placeholder="输入内容..." />

// 错误状态
<Input variant="destructive" aria-invalid="true" />

// 不同尺寸
<Input size="sm" placeholder="小输入框" />
<Input size="lg" placeholder="大输入框" />
```

### Dialog 组件

#### 尺寸（Sizes）
- **sm**: 小弹窗 (max-w-sm)
- **md**: 中等弹窗 (max-w-md)
- **lg**: 大弹窗 (max-w-lg) - 默认
- **xl**: 超大弹窗 (max-w-xl)
- **2xl**: 最大弹窗 (max-w-2xl)

#### 使用示例
```tsx
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
} from "@/components/ui/dialog"

<Dialog open={isOpen} onOpenChange={setIsOpen}>
  <DialogContent size="lg">
    <DialogHeader>
      <DialogTitle>编辑书签</DialogTitle>
      <DialogDescription>修改书签的标题和描述</DialogDescription>
    </DialogHeader>
    {/* 内容 */}
    <DialogFooter>
      <Button variant="outline">取消</Button>
      <Button>保存</Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

---

## 🔄 状态管理

### 按钮状态
- **default**: 正常状态
- **hover**: 悬停状态（背景变暗）
- **active**: 按下状态（背景更暗）
- **disabled**: 禁用状态（opacity-50）
- **focus**: 焦点状态（ring-2）

### 输入框状态
- **default**: 正常状态
- **focus**: 焦点状态（border-ring, ring-ring/50）
- **disabled**: 禁用状态（opacity-50）
- **aria-invalid**: 错误状态（border-destructive）

---

## 📦 使用 cva 的最佳实践

### 1. 定义变体
```tsx
const buttonVariants = cva(
  "base-classes",
  {
    variants: {
      variant: { /* ... */ },
      size: { /* ... */ },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)
```

### 2. 导出接口
```tsx
export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean
}
```

### 3. 使用 forwardRef
```tsx
const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, ...props }, ref) => (
    <button
      className={cn(buttonVariants({ variant, size, className }))}
      ref={ref}
      {...props}
    />
  )
)
```

---

## 🎯 后续优化方向

1. **响应式设计**: 为组件添加响应式尺寸变体
2. **加载状态**: 为 Button 添加 loading 变体
3. **表单集成**: 为 Input 添加 label、error message 等
4. **主题定制**: 支持用户自定义主题色
5. **无障碍**: 完善 ARIA 属性和键盘导航

---

## 📚 相关文件

- 颜色定义: `assets/main.css`
- 强调色工具: `lib/accentColorUtils.ts`
- Button 组件: `components/ui/button.tsx`
- Input 组件: `components/ui/input.tsx`
- Dialog 组件: `components/ui/dialog.tsx`
- Tailwind 配置: `tailwind.config.js`

